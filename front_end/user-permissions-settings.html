<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>User-Permisions-Settings | Dreams EMR - Responsive Bootstrap 5 Medical Admin Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Dreams EMR is a flexible, powerful, modern, and responsive Bootstrap 5 admin template with endless potential.">
    <meta name="keywords"
        content="Dreams EMR admin template, admin template, dashboard template, responsive admin template, medical admin template, web app">
    <meta name="author" content="dreamstechnologies">

    <!-- Favicon -->
    <link rel="shortcut icon" href="assets/img/favicon.png">

    <!-- Apple Icon -->
    <link rel="apple-touch-icon" href="assets/img/apple-icon.png">

    <!-- Theme Config Js -->
    <script src="assets/js/theme-script.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">

    <!-- Tabler Icon CSS -->
    <link rel="stylesheet" href="assets/plugins/tabler-icons/tabler-icons.min.css">

    <!-- Simplebar CSS -->
    <link rel="stylesheet" href="assets/plugins/simplebar/simplebar.min.css">

    <!-- Main CSS -->
    <link rel="stylesheet" href="assets/css/style.css" id="app-style">

</head>

<body>

    <!-- Begin Wrapper -->
    <div class="main-wrapper">

        <!-- Topbar Start -->
        <header class="navbar-header">
            <div class="page-container topbar-menu">
                <div class="d-flex align-items-center gap-2">
                    <!-- Sidebar Mobile Button -->
                    <a id="mobile_btn" class="mobile-btn" href="#sidebar">
                        <i class="ti ti-menu-deep fs-24"></i>
                    </a>
                    <!-- Logo -->
                    <a href="index.html" class="logo">

                        <!-- Logo Normal -->
                        <span class="logo-light">
                            <span class="logo-lg"><img src="assets/img/logo.svg" alt="logo"></span>
                        </span>

                        <!-- Logo Dark -->
                        <span class="logo-dark">
                            <span class="logo-lg"><img src="assets/img/logo-dark.svg" alt="dark logo"></span>
                        </span>

                        <!-- Logo Sm -->
                        <span class="logo-small">
                            <span class="logo-lg"><img src="assets/img/logo-small.svg" alt="small logo"></span>
                        </span>
                    </a>

                    <button class="sidenav-toggle-btn btn border-0 p-0 active" id="toggle_btn2">
                        <i class="ti ti-arrow-bar-to-right"></i>
                    </button>

                </div>

                <div class="d-flex align-items-center">

                    <!-- Light/Dark Mode Button -->
                    <div class="header-item d-flex me-2">
                        <button class="topbar-link btn topbar-link" id="light-dark-mode" type="button">
                            <i class="ti ti-moon fs-16"></i>
                        </button>
                    </div>

                    <!-- User Dropdown -->
                    <div class="dropdown profile-dropdown d-flex align-items-center justify-content-center">
                        <a href="javascript:void(0);"
                            class="topbar-link dropdown-toggle drop-arrow-none position-relative"
                            data-bs-toggle="dropdown" data-bs-offset="0,22" aria-haspopup="false" aria-expanded="false">
                            <img src="assets/img/avatars/avatar-31.jpg" width="32" class="rounded-2 d-flex"
                                alt=patient">
                            <span class="online text-success"><i
                                    class="ti ti-circle-filled d-flex bg-white rounded-circle border border-1 border-white"></i></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end dropdown-menu-md p-2">

                            <div class="d-flex align-items-center bg-light rounded p-2 mb-2">
                                <img src="assets/img/avatars/avatar-31.jpg" class="rounded-circle" width="42"
                                    height="42" alt="patient">
                                <div class="ms-2">
                                    <p class="fw-medium text-dark mb-0">Jimmy Anderson</p>
                                    <span class="d-block fs-13">Administrator</span>
                                </div>
                            </div>

                            <!-- Item-->
                            <a href="general-settings.html" class="dropdown-item">
                                <i class="ti ti-user-circle me-1 align-middle"></i>
                                <span class="align-middle">Profile Settings</span>
                            </a>

                            <!-- Item-->
                            <div class="pt-2 mt-2 border-top">
                                <a href="login.html" class="dropdown-item text-danger">
                                    <i class="ti ti-logout me-1 fs-17 align-middle"></i>
                                    <span class="align-middle">Sign Out</span>
                                </a>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </header>
        <!-- Topbar End -->


        <!-- Sidenav Menu Start -->
        <div class="sidebar" id="sidebar">

            <!-- Start Logo -->
            <div class="sidebar-logo">
                <div>
                    <!-- Logo Normal -->
                    <a href="index.html" class="logo logo-normal">
                        <img src="assets/img/logo.svg" alt="Logo">
                    </a>

                    <!-- Logo Small -->
                    <a href="index.html" class="logo-small">
                        <img src="assets/img/logo-small.svg" alt="Logo">
                    </a>

                    <!-- Logo Dark -->
                    <a href="index.html" class="dark-logo">
                        <img src="assets/img/logo-dark.svg" alt="Logo">
                    </a>
                </div>
                <button class="sidenav-toggle-btn btn border-0 p-0 active" id="toggle_btn">
                    <i class="ti ti-arrow-bar-to-left"></i>
                </button>

                <!-- Sidebar Menu Close -->
                <button class="sidebar-close">
                    <i class="ti ti-x align-middle"></i>
                </button>
            </div>
            <!-- End Logo -->

            <!-- Sidenav Menu -->
            <div class="sidebar-inner" data-simplebar>
                <div id="sidebar-menu" class="sidebar-menu">
                    <ul role="menu" aria-label="Main navigation menu">
                        <li class="menu-title" aria-disabled="true"><span>MAIN</span></li>

                        <li>
                            <a href="index.html">
                                <i class="ti ti-layout-board"></i><span>Dashboard</span>
                            </a>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-apps"></i><span>Applications</span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="chat.html">Chat</a></li>
                                <li class="submenu submenu-two">
                                    <a href="#">Calls<span class="menu-arrow inside-submenu"></span></a>
                                    <ul>
                                        <li><a href="voice-call.html">Voice Call</a></li>
                                        <li><a href="video-call.html">Video Call</a></li>
                                    </ul>
                                </li>
                                <li><a href="calendar.html">Calendar</a></li>
                                <li><a href="email.html">Email</a></li>
                                <li><a href="contacts.html">Contacts</a></li>
                                <li class="submenu submenu-two">
                                    <a href="#">Invoices<span class="menu-arrow inside-submenu"></span></a>
                                    <ul>
                                        <li><a href="invoice.html">Invoices</a></li>
                                        <li><a href="invoice-details.html">Invoice Details</a></li>
                                    </ul>
                                </li>
                                <li><a href="todo.html">To Do</a></li>
                                <li><a href="notes.html">Notes</a></li>
                                <li><a href="kanban-view.html">Kanban Board</a></li>
                                <li><a href="file-manager.html">File Manager</a></li>
                                <li><a href="social-feed.html">Social Feed</a></li>
                                <li><a href="search-result.html">Search Result</a></li>
                            </ul>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-layout-kanban"></i><span>Layouts</span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="layout-mini.html">Mini</a></li>
                                <li><a href="layout-hoverview.html">Hover View</a></li>
                                <li><a href="layout-hidden.html">Hidden</a></li>
                                <li><a href="layout-fullwidth.html">Full Width</a></li>
                                <li><a href="layout-rtl.html">RTL</a></li>
                                <li><a href="layout-dark.html">Dark</a></li>
                            </ul>
                        </li>

                        <li class="menu-title" aria-disabled="true"><span>HEALTHCARE</span></li>

                        <li>
                            <a href="patients.html">
                                <i class="ti ti-users"></i><span>Patients</span>
                            </a>
                        </li>

                        <li>
                            <a href="doctors.html">
                                <i class="ti ti-stethoscope"></i><span>Doctors</span>
                            </a>
                        </li>

                        <li>
                            <a href="appointments.html">
                                <i class="ti ti-calendar-time"></i><span>Appointments</span>
                            </a>
                        </li>

                        <li>
                            <a href="visits.html">
                                <i class="ti ti-e-passport"></i><span>Visits</span>
                            </a>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-test-pipe"></i><span>Laboratory</span><span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li>
                                    <a href="lab-results.html">Lab Results</a>
                                </li>
                                <li>
                                    <a href="medical-results.html">Medical Rsults</a>
                                </li>
                            </ul>
                        </li>

                        <li>
                            <a href="pharmacy.html">
                                <i class="ti ti-prescription"></i><span>Pharmacy</span>
                            </a>
                        </li>

                        <li class="menu-title" aria-disabled="true"><span>MANAGE</span></li>

                        <li>
                            <a href="staffs.html">
                                <i class="ti ti-users-group"></i><span>Staffs</span>
                            </a>
                        </li>

                        <li>
                            <a href="notifications.html">
                                <i class="ti ti-bell"></i><span>Notifications</span>
                            </a>
                        </li>

                        <li>
                            <a href="general-settings.html" class="active">
                                <i class="ti ti-settings"></i><span>Settings</span>
                            </a>
                        </li>

                        <li class="menu-title" aria-disabled="true"><span>PAGES</span></li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-lock-square-rounded"></i><span>Authentication</span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="login.html">Login</a></li>
                                <li><a href="sign-up.html">Sign Up</a></li>
                                <li><a href="forgot-password.html">Forgot Password</a></li>
                                <li><a href="change-password.html">Change Password</a></li>
                                <li><a href="lock-screen.html">Lock Screen</a></li>
                            </ul>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-face-id-error"></i><span>Error Pages</span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="error-404.html">Error 404</a></li>
                                <li><a href="error-500.html">Error 500</a></li>
                            </ul>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-files"></i><span>Other Pages</span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="starter-page.html">Starter Page</a></li>
                                <li><a href="coming-soon.html">Coming Soon</a></li>
                                <li><a href="under-maintenance.html">Under Maintenance</a></li>
                                <li><a href="privacy-policy.html">Privacy Policy</a></li>
                                <li><a href="terms-and-conditions.html">Terms & Conditions</a></li>
                            </ul>
                        </li>

                        <li class="menu-title" aria-disabled="true"><span>UI Interface</span></li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-hierarchy"></i><span>Base UI</span><span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="ui-accordion.html">Accordion</a></li>
                                <li><a href="ui-alerts.html">Alerts</a></li>
                                <li><a href="ui-avatar.html">Avatar</a></li>
                                <li><a href="ui-badges.html">Badges</a></li>
                                <li><a href="ui-breadcrumb.html">Breadcrumb</a></li>
                                <li><a href="ui-buttons.html">Buttons</a></li>
                                <li><a href="ui-buttons-group.html">Button Group</a></li>
                                <li><a href="ui-cards.html">Card</a></li>
                                <li><a href="ui-carousel.html">Carousel</a></li>
                                <li><a href="ui-collapse.html">Collapse</a></li>
                                <li><a href="ui-dropdowns.html">Dropdowns</a></li>
                                <li><a href="ui-ratio.html">Ratio</a></li>
                                <li><a href="ui-grid.html">Grid</a></li>
                                <li><a href="ui-images.html">Images</a></li>
                                <li><a href="ui-links.html">Links</a></li>
                                <li><a href="ui-list-group.html">List Group</a></li>
                                <li><a href="ui-modals.html">Modals</a></li>
                                <li><a href="ui-offcanvas.html">Offcanvas</a></li>
                                <li><a href="ui-pagination.html">Pagination</a></li>
                                <li><a href="ui-placeholders.html">Placeholders</a></li>
                                <li><a href="ui-popovers.html">Popovers</a></li>
                                <li><a href="ui-progress.html">Progress</a></li>
                                <li><a href="ui-scrollspy.html">Scrollspy</a></li>
                                <li><a href="ui-spinner.html">Spinner</a></li>
                                <li><a href="ui-nav-tabs.html">Tabs</a></li>
                                <li><a href="ui-toasts.html">Toasts</a></li>
                                <li><a href="ui-tooltips.html">Tooltips</a></li>
                                <li><a href="ui-typography.html">Typography</a></li>
                                <li><a href="ui-utilities.html">Utilities</a></li>
                            </ul>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-whirl"></i><span>Advanced UI</span><span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="ui-dragula.html">Dragula</a></li>
                                <li><a href="ui-clipboard.html">Clipboard</a></li>
                                <li><a href="ui-rangeslider.html">Range Slider</a></li>
                                <li><a href="ui-sweetalerts.html">Sweet Alerts</a></li>
                                <li><a href="ui-lightbox.html">Lightbox</a></li>
                                <li><a href="ui-rating.html">Rating</a></li>
                                <li><a href="ui-scrollbar.html">Scrollbar</a></li>
                            </ul>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-forms"></i><span>Forms</span><span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li class="submenu submenu-two">
                                    <a href="javascript:void(0);">Form Elements<span
                                            class="menu-arrow inside-submenu"></span></a>
                                    <ul>
                                        <li><a href="form-basic-inputs.html">Basic Inputs</a></li>
                                        <li><a href="form-checkbox-radios.html">Checkbox & Radios</a></li>
                                        <li><a href="form-input-groups.html">Input Groups</a></li>
                                        <li><a href="form-grid-gutters.html">Grid & Gutters</a></li>
                                        <li><a href="form-mask.html">Input Masks</a></li>
                                        <li><a href="form-fileupload.html">File Uploads</a></li>
                                    </ul>
                                </li>
                                <li class="submenu submenu-two">
                                    <a href="javascript:void(0);">Layouts<span
                                            class="menu-arrow inside-submenu"></span></a>
                                    <ul>
                                        <li><a href="form-horizontal.html">Horizontal Form</a></li>
                                        <li><a href="form-vertical.html">Vertical Form</a></li>
                                        <li><a href="form-floating-labels.html">Floating Labels</a></li>
                                    </ul>
                                </li>
                                <li><a href="form-validation.html">Form Validation</a></li>
                                <li><a href="form-select.html">Form Select</a></li>
                                <li><a href="form-wizard.html">Form Wizard</a></li>
                                <li><a href="form-pickers.html">Form Picker</a></li>
                                <li><a href="form-editors.html">Form Editors</a></li>
                            </ul>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-table"></i><span>Tables</span><span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="tables-basic.html">Basic Tables </a></li>
                                <li><a href="data-tables.html">Data Table </a></li>
                            </ul>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-chart-pie-3"></i><span>Charts</span><span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="chart-apex.html">Apex Charts</a></li>
                                <li><a href="chart-c3.html">Chart C3</a></li>
                                <li><a href="chart-js.html">Chart Js</a></li>
                                <li><a href="chart-morris.html">Morris Charts</a></li>
                                <li><a href="chart-flot.html">Flot Charts</a></li>
                                <li><a href="chart-peity.html">Peity Charts</a></li>
                            </ul>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-icons"></i><span>Icons</span><span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="icon-fontawesome.html">Fontawesome Icons</a></li>
                                <li><a href="icon-tabler.html">Tabler Icons</a></li>
                                <li><a href="icon-bootstrap.html">Bootstrap Icons</a></li>
                                <li><a href="icon-remix.html">Remix Icons</a></li>
                                <li><a href="icon-feather.html">Feather Icons</a></li>
                                <li><a href="icon-ionic.html">Ionic Icons</a></li>
                                <li><a href="icon-material.html">Material Icons</a></li>
                                <li><a href="icon-pe7.html">Pe7 Icons</a></li>
                                <li><a href="icon-simpleline.html">Simpleline Icons</a></li>
                                <li><a href="icon-themify.html">Themify Icons</a></li>
                                <li><a href="icon-weather.html">Weather Icons</a></li>
                                <li><a href="icon-typicon.html">Typicon Icons</a></li>
                                <li><a href="icon-flag.html">Flag Icons</a></li>
                            </ul>
                        </li>

                        <li>
                            <a href="widgets.html">
                                <i class="ti ti-components"></i><span>Widgets</span>
                            </a>
                        </li>

                        <li class="menu-title" aria-disabled="true"><span>HELP</span></li>

                        <li>
                            <a href="javascript:void(0);"><i
                                    class="ti ti-file-type-doc"></i><span>Documentation</span></a>
                        </li>

                        <li>
                            <a href="javascript:void(0);"><i class="ti ti-git-compare"></i>
                                <span>Changelog</span>
                            </a>
                        </li>

                        <li class="submenu">
                            <a href="javascript:void(0);">
                                <i class="ti ti-menu-order"></i><span>Multi Level</span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul>
                                <li><a href="javascript:void(0);">Multilevel 1</a></li>
                                <li class="submenu submenu-two">
                                    <a href="javascript:void(0);">Multilevel 2<span
                                            class="menu-arrow inside-submenu"></span></a>
                                    <ul>
                                        <li><a href="javascript:void(0);">Multilevel 2.1</a></li>
                                        <li class="submenu submenu-two submenu-three">
                                            <a href="javascript:void(0);">Multilevel 2.2<span
                                                    class="menu-arrow inside-submenu inside-submenu-two"></span></a>
                                            <ul>
                                                <li><a href="javascript:void(0);">Multilevel 2.2.1</a></li>
                                                <li><a href="javascript:void(0);">Multilevel 2.2.2</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="javascript:void(0);">Multilevel 3</a></li>
                            </ul>
                        </li>

                    </ul>
                </div>
            </div>

        </div>
        <!-- Sidenav Menu End -->

        <!-- ========================
			Start Page Content
		========================= -->

        <div class="page-wrapper">

            <!-- Start Content -->
            <div class="content">

                <!-- Page Header -->
                <div class="d-flex align-items-center justify-content-between gap-2 mb-4 flex-wrap">
                    <div class="breadcrumb-arrow">
                        <h4 class="mb-1">Settings</h4>
                        <div class="text-end">
                            <ol class="breadcrumb m-0 py-0">
                                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                                <li class="breadcrumb-item"><a href="general-settings.html">Settings</a></li>
                                <li class="breadcrumb-item active">Permissions</li>
                            </ol>
                        </div>
                    </div>
                </div>
                <!-- End Page Header -->

                <!-- Start Tabs -->
                <ul class="nav nav-tabs nav-item-primary mb-3 border-bottom pb-4 mb-4 d-flex align-items-center gap-2">
                    <li class="nav-item">
                        <a href="general-settings.html" class="nav-link border rounded fw-semibold">
                            General
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="security-settings.html" class="nav-link border rounded fw-semibold">
                            Security
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="user-permissions-settings.html" class="nav-link border rounded fw-semibold active">
                            User Permissions
                        </a>
                    </li>
                </ul>
                <!-- End Tabs -->

                <!-- card start -->
                <div class="card mb-0">
                    <div class="card-header d-flex align-items-center flex-wrap gap-2 justify-content-between">
                        <h5 class="d-inline-flex align-items-center mb-0">Total Roles<span
                                class="badge bg-danger ms-2" id="role-count">0</span></h5>
                        <div>
                            <a href="javascript:void(0);" class="btn btn-primary" data-bs-toggle="modal"
                                data-bs-target="#add_role"><i class="ti ti-square-rounded-plus me-1"></i>New Role</a>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive table-nowrap">
                            <table class="table border mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th>Role</th>
                                        <th>Description</th>
                                        <th>Created Date</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="roles-table-body">
                                    <!-- Dynamic content will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- card end -->

            </div>
            <!-- End Content -->
            <!-- Start Footer -->
            <footer class="footer text-center">
                <p class="mb-0 text-dark">2025 &copy; <a href="javascript:void(0);" class="link-primary">Dreams EMR</a>
                    - All Rights Reserved.</p>
            </footer>
            <!-- End Footer -->
        </div>

        <!-- ========================
			End Page Content
		========================= -->
    </div>
    <!-- End Wrapper -->

    <!-- Start Add Modal -->
    <div class="modal fade" id="add_role">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="text-dark modal-title fw-bold text-truncate">Add New Role</h5>
                    <button type="button" class="btn-close btn-close-modal" data-bs-dismiss="modal"
                        aria-label="Close"><i class="ti ti-circle-x-filled"></i></button>
                </div>
                <form id="add-role-form">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">Role Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="add-role-name" name="name" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" id="add-role-description" name="description" rows="3"></textarea>
                        </div>
                        <div class="d-flex align-items-center justify-content-between">
                            <label class="form-label mb-0">Status</label>
                            <label class="d-flex align-items-center form-switch ps-2">
                                <input class="form-check-input m-0 me-2" type="checkbox" id="add-role-status" checked>
                                <span class="form-check-label">Active</span>
                            </label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-white me-2" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Role</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- End Add Modal -->

    <!-- Start Edit Modal -->
    <div class="modal fade" id="edit_role">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="text-dark modal-title fw-bold text-truncate">Edit Role</h5>
                    <button type="button" class="btn-close btn-close-modal" data-bs-dismiss="modal"
                        aria-label="Close"><i class="ti ti-circle-x-filled"></i></button>
                </div>
                <form id="edit-role-form">
                    <input type="hidden" id="edit-role-id" name="id">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">Role Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="edit-role-name" name="name" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" id="edit-role-description" name="description" rows="3"></textarea>
                        </div>
                        <div class="d-flex align-items-center justify-content-between">
                            <label class="form-label mb-0">Status</label>
                            <label class="d-flex align-items-center form-switch ps-2">
                                <input class="form-check-input m-0 me-2" type="checkbox" id="edit-role-status">
                                <span class="form-check-label">Active</span>
                            </label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-white me-2" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- End Edit Modal -->

    <!-- Start Delete Modal  -->
    <div class="modal fade" id="delete_modal">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content">
                <div class="modal-body text-center">
                    <div class="mb-2">
                        <span class="avatar avatar-md rounded-circle bg-danger"><i class="ti ti-trash fs-24"></i></span>
                    </div>
                    <h6 class="fs-16 mb-1">Confirm Deletion</h6>
                    <p class="mb-3">Are you sure you want to delete this role?</p>
                    <input type="hidden" id="delete-role-id">
                    <div class="d-flex justify-content-center gap-2">
                        <button type="button" class="btn btn-white w-100" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger w-100" id="confirm-delete-role">Yes, Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Delete Modal  -->

    <!-- jQuery -->
    <script src="assets/js/jquery-3.7.1.min.js"></script>

    <!-- Bootstrap Core JS -->
    <script src="assets/js/bootstrap.bundle.min.js"></script>

    <!-- Simplebar JS -->
    <script src="assets/plugins/simplebar/simplebar.min.js"></script>

    <!-- Main JS -->
    <script src="assets/js/script.js"></script>

    <!-- Roles CRUD JavaScript -->
    <script>
        // Global variables
        let roles = [];
        let currentRoleId = null;

        // API Base URL
        const API_BASE = '/api/roles';

        // Initialize the page
        $(document).ready(function() {
            loadRoles();
            setupEventListeners();
        });

        // Setup event listeners
        function setupEventListeners() {
            // Add role form
            $('#add-role-form').on('submit', function(e) {
                e.preventDefault();
                addRole();
            });

            // Edit role form
            $('#edit-role-form').on('submit', function(e) {
                e.preventDefault();
                updateRole();
            });

            // Delete role confirmation
            $('#confirm-delete-role').on('click', function() {
                deleteRole();
            });
        }

        // Load roles from database
        function loadRoles() {
            $.ajax({
                url: API_BASE + '/',
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + getAuthToken()
                },
                success: function(response) {
                    roles = response || [];
                    renderRolesTable();
                    updateRoleCount();
                },
                error: function(xhr, status, error) {
                    console.error('Error loading roles:', error);
                    showAlert('Error loading roles: ' + error, 'danger');
                }
            });
        }

        // Render roles table
        function renderRolesTable() {
            const tbody = $('#roles-table-body');
            tbody.empty();

            if (roles.length === 0) {
                tbody.append(`
                    <tr>
                        <td colspan="5" class="text-center py-4">
                            <div class="text-muted">No roles found</div>
                        </td>
                    </tr>
                `);
                return;
            }

            roles.forEach(role => {
                const statusBadge = role.status === 'Active' 
                    ? '<span class="badge badge-soft-success">Active</span>'
                    : '<span class="badge badge-soft-danger">Inactive</span>';
                
                const createdDate = new Date(role.created_at).toLocaleDateString();
                
                tbody.append(`
                    <tr>
                        <td><strong>${escapeHtml(role.name)}</strong></td>
                        <td>${escapeHtml(role.description || '')}</td>
                        <td>${createdDate}</td>
                        <td>${statusBadge}</td>
                        <td class="text-end">
                            <a href="javascript:void(0);" class="btn btn-icon btn-outline-light"
                                data-bs-toggle="dropdown" aria-label="more options">
                                <i class="ti ti-dots-vertical"></i>
                            </a>
                            <ul class="dropdown-menu p-2">
                                <li>
                                    <a href="javascript:void(0);" class="dropdown-item d-flex align-items-center"
                                        onclick="editRole(${role.id})">
                                        <i class="ti ti-edit me-1"></i>Edit
                                    </a>
                                </li>
                                <li>
                                    <a href="javascript:void(0);" class="dropdown-item d-flex align-items-center"
                                        onclick="deleteRole(${role.id})">
                                        <i class="ti ti-trash me-1"></i>Delete
                                    </a>
                                </li>
                                <li>
                                    <a href="permission-settings.html" class="dropdown-item d-flex align-items-center">
                                        <i class="ti ti-shield me-1"></i>Permissions
                                    </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                `);
            });
        }

        // Update role count
        function updateRoleCount() {
            $('#role-count').text(roles.length);
        }

        // Add new role
        function addRole() {
            const formData = {
                name: $('#add-role-name').val().trim(),
                description: $('#add-role-description').val().trim()
            };

            if (!formData.name) {
                showAlert('Role name is required', 'warning');
                return;
            }

            $.ajax({
                url: API_BASE + '/',
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer ' + getAuthToken()
                },
                data: JSON.stringify(formData),
                success: function(response) {
                    showAlert('Role added successfully', 'success');
                    $('#add_role').modal('hide');
                    $('#add-role-form')[0].reset();
                    loadRoles();
                },
                error: function(xhr, status, error) {
                    console.error('Error adding role:', error);
                    const errorMessage = xhr.responseJSON?.detail || error;
                    showAlert('Error adding role: ' + errorMessage, 'danger');
                }
            });
        }

        // Edit role
        function editRole(roleId) {
            const role = roles.find(r => r.id == roleId);
            if (!role) return;

            currentRoleId = roleId;
            $('#edit-role-id').val(roleId);
            $('#edit-role-name').val(role.name);
            $('#edit-role-description').val(role.description || '');
            $('#edit-role-status').prop('checked', role.status === 'Active');
            
            $('#edit_role').modal('show');
        }

        // Update role
        function updateRole() {
            const formData = {
                name: $('#edit-role-name').val().trim(),
                description: $('#edit-role-description').val().trim()
            };

            if (!formData.name) {
                showAlert('Role name is required', 'warning');
                return;
            }

            const roleId = $('#edit-role-id').val();

            $.ajax({
                url: API_BASE + '/' + roleId,
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer ' + getAuthToken()
                },
                data: JSON.stringify(formData),
                success: function(response) {
                    showAlert('Role updated successfully', 'success');
                    $('#edit_role').modal('hide');
                    loadRoles();
                },
                error: function(xhr, status, error) {
                    console.error('Error updating role:', error);
                    const errorMessage = xhr.responseJSON?.detail || error;
                    showAlert('Error updating role: ' + errorMessage, 'danger');
                }
            });
        }

        // Delete role
        function deleteRole(roleId) {
            if (roleId) {
                currentRoleId = roleId;
                $('#delete-role-id').val(roleId);
                $('#delete_modal').modal('show');
            } else {
                // Confirm deletion
                const roleIdToDelete = $('#delete-role-id').val();

                $.ajax({
                    url: API_BASE + '/' + roleIdToDelete,
                    method: 'DELETE',
                    headers: {
                        'Authorization': 'Bearer ' + getAuthToken()
                    },
                    success: function(response) {
                        showAlert('Role deleted successfully', 'success');
                        $('#delete_modal').modal('hide');
                        loadRoles();
                    },
                    error: function(xhr, status, error) {
                        console.error('Error deleting role:', error);
                        const errorMessage = xhr.responseJSON?.detail || error;
                        showAlert('Error deleting role: ' + errorMessage, 'danger');
                    }
                });
            }
        }

        // Utility functions
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function escapeSql(text) {
            return text.replace(/'/g, "''");
        }

        function getAuthToken() {
            // Get token from localStorage or cookie
            return localStorage.getItem('auth_token') || '';
        }

        function showAlert(message, type) {
            // Create and show alert
            const alertHtml = `
                <div class="alert alert-${type} alert-dismissible fade show" role="alert">
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            `;
            
            // Remove existing alerts
            $('.alert').remove();
            
            // Add new alert
            $('.content').prepend(alertHtml);
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                $('.alert').fadeOut();
            }, 5000);
        }
    </script>

</body>

</html>